document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form"),t=document.getElementById("shroud");function n(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function s(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function r(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(a){a.preventDefault();let o=function(e){let t=0,a=document.querySelectorAll("._req");for(let e=0;e<a.length;e++){const o=a[e];s(o),o.classList.contains("_email")?r(o)&&(n(o),t++):""===o.value&&(n(o),t++)}return t}();new FormData(e);if(0===o){t.classList.add("_sending");let n=await fetch("sendmail.php",{method:"POST",body:formData});if(n.ok){let s=await n.json();alert(s.message),formPreview.innerHTML="",e.reset(),t.classList.remove("_sending")}else alert("Ошибка"),t.classList.remove("_sending")}else alert("Заполните обязательные поля")}))}));